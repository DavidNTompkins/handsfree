(window.webpackJsonp=window.webpackJsonp||[]).push([[83],{431:function(e,t,i){"use strict";i.r(t);i(172),i(318),i(96),i(177),i(69),i(98),i(9),i(97);var n,a,o=i(23),s=i(46),d=(i(44),i(47),i(183),i(357)),r=(i(99),i(48)),h=i(101),l=i(100),c=(i(173),i(319),function(){function e(t,i){var n=arguments,a=this;Object(o.a)(this,e),this.handsfree=t,this.config=i,this.data={},this.dependenciesLoaded=!1,this.enabled=i.enabled,this.plugins=[],this.gestures=[],this.gestureEstimator=null,setTimeout((function(){var e=a.getData;a.getData=Object(r.a)(regeneratorRuntime.mark((function t(){var i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.apply(a,n);case 2:if(t.t0=t.sent,t.t0){t.next=5;break}t.t0={};case 5:return(i=t.t0).gesture=a.getGesture(),a.runPlugins(),t.abrupt("return",i);case 9:case"end":return t.stop()}}),t)})));var t=a.getGesture;a.getGesture=function(){return t||(t=function(){}),t.apply(a,n)}}),0)}return Object(s.a)(e,[{key:"loadDependencies",value:function(){}},{key:"updateData",value:function(){}},{key:"updateGestureEstimator",value:function(){}},{key:"enable",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.handsfree.config[this.name]=this.config,this.handsfree.config[this.name].enabled=this.enabled=!0,document.body.classList.add("handsfree-model-".concat(this.name)),e&&!this.dependenciesLoaded&&this.loadDependencies(),"weboji"===this.name&&(this.handsfree.debug.$canvas.weboji.style.display="block")}},{key:"disable",value:function(){var e=this;this.handsfree.config[this.name]=this.config,this.handsfree.config[this.name].enabled=this.enabled=!1,document.body.classList.remove("handsfree-model-".concat(this.name)),setTimeout((function(){var t;"weboji"===e.name?e.handsfree.debug.$canvas.weboji.style.display="none":(null===(t=e.handsfree.debug.context[e.name])||void 0===t?void 0:t.clearRect)&&e.handsfree.debug.context[e.name].clearRect(0,0,e.handsfree.debug.$canvas[e.name].width,e.handsfree.debug.$canvas[e.name].height);Object.keys(e.handsfree.model).some((function(t){return e.handsfree.model[t].enabled}))||e.handsfree.stop()}),0)}},{key:"loadDependency",value:function(e,t){var i=this,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(n)t&&t();else{var a=document.createElement("script");a.async=!0,a.onload=function(){t&&t()},a.onerror=function(){i.handsfree.emit("modelError","Error loading ".concat(e))},a.src=e,document.body.appendChild(a)}}},{key:"runPlugins",value:function(){var e=this;this.data&&("handpose"!==this.name||this.data.annotations)&&Object.keys(this.data).length&&this.plugins.forEach((function(t){var i;e.handsfree.plugin[t].enabled&&(null===(i=e.handsfree.plugin[t])||void 0===i||i.onFrame(e.handsfree.data))}))}}]),e}()),u=i(358),g=i.n(u),f=function(e){Object(h.a)(n,e);var t,i=Object(l.a)(n);function n(e,t){var a;return Object(o.a)(this,n),(a=i.call(this,e,t)).name="hands",a.palmPoints=[0,5,9,13,17],a.gestureEstimator=new g.a.GestureEstimator([]),a}return Object(s.a)(n,[{key:"loadDependencies",value:function(e){var t=this;this.handsfree.config.isClient?this.loadDependency("".concat(this.handsfree.config.assetsPath,"/@mediapipe/drawing_utils.js"),(function(){t.onWarmUp(e)}),!!window.drawConnectors):this.loadDependency("".concat(this.handsfree.config.assetsPath,"/@mediapipe/hands/hands.js"),(function(){t.api=new window.Hands({locateFile:function(e){return"".concat(t.handsfree.config.assetsPath,"/@mediapipe/hands/").concat(e)}}),t.api.setOptions(t.handsfree.config.hands),t.api.onResults((function(e){return t.dataReceived(e)})),t.handsfree.getUserMedia((function(){t.handsfree.mediapipeWarmups.isWarmingUp?t.handsfree.on("mediapipeWarmedUp",(function(){t.handsfree.mediapipeWarmups.isWarmingUp||t.handsfree.mediapipeWarmups[t.name]||t.warmUp(e)})):t.warmUp(e)})),t.loadDependency("".concat(t.handsfree.config.assetsPath,"/@mediapipe/drawing_utils.js"),null,!!window.drawConnectors)}))}},{key:"warmUp",value:function(e){var t=this;this.handsfree.mediapipeWarmups[this.name]=!0,this.handsfree.mediapipeWarmups.isWarmingUp=!0,this.api.send({image:this.handsfree.debug.$video}).then((function(){t.handsfree.mediapipeWarmups.isWarmingUp=!1,t.onWarmUp(e)}))}},{key:"onWarmUp",value:function(e){this.dependenciesLoaded=!0,document.body.classList.add("handsfree-model-hands"),this.handsfree.emit("modelReady",this),this.handsfree.emit("handsModelReady",this),this.handsfree.emit("mediapipeWarmedUp",this),e&&e(this)}},{key:"getData",value:(t=Object(r.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.dependenciesLoaded,!e.t0){e.next=4;break}return e.next=4,this.api.send({image:this.handsfree.debug.$video});case 4:return e.abrupt("return",this.data);case 5:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"dataReceived",value:function(e){e.multiHandLandmarks&&(e=this.getCenterOfPalm(e)),e=this.forceHandedness(e),this.data=e,this.handsfree.data.hands=e,this.handsfree.isDebugging&&this.debug(e)}},{key:"forceHandedness",value:function(e){return e.landmarks=[[],[],[],[]],e.landmarksVisible=[!1,!1,!1,!1],e.multiHandLandmarks?(e.multiHandLandmarks.forEach((function(t,i){var n;n=i<2?"Right"===e.multiHandedness[i].label?0:1:"Right"===e.multiHandedness[i].label?2:3,e.landmarks[n]=t,e.landmarksVisible[n]=!0})),e):e}},{key:"getCenterOfPalm",value:function(e){var t=this;return e.multiHandLandmarks.forEach((function(i,n){var a=0,o=0;t.palmPoints.forEach((function(e){a+=i[e].x,o+=i[e].y})),a/=t.palmPoints.length,o/=t.palmPoints.length,e.multiHandLandmarks[n][21]={x:a,y:o}})),e}},{key:"debug",value:function(e){if("undefined"!=typeof drawConnectors&&(this.handsfree.debug.context.hands.clearRect(0,0,this.handsfree.debug.$canvas.hands.width,this.handsfree.debug.$canvas.hands.height),e.multiHandLandmarks)){var t,i=Object(d.a)(e.multiHandLandmarks);try{for(i.s();!(t=i.n()).done;){var n=t.value;drawConnectors(this.handsfree.debug.context.hands,n,HAND_CONNECTIONS,{color:"#00FF00",lineWidth:5}),drawLandmarks(this.handsfree.debug.context.hands,n,{color:"#FF0000",lineWidth:2})}}catch(e){i.e(e)}finally{i.f()}}}},{key:"updateGestureEstimator",value:function(){var e=this,t=[],i=[];this.gestures.forEach((function(i){if(e.handsfree.gesture[i].enabled&&(t.push(i),!e.handsfree.gesture[i].compiledDescription&&e.handsfree.gesture[i].enabled)){var n=new g.a.GestureDescription(i);e.handsfree.gesture[i].description.forEach((function(e){switch(e[0]){case"addCurl":n[e[0]](g.a.Finger[e[1]],g.a.FingerCurl[e[2]],e[3]);break;case"addDirection":n[e[0]](g.a.Finger[e[1]],g.a.FingerDirection[e[2]],e[3]);break;case"setWeight":n[e[0]](g.a.Finger[e[1]],e[2])}})),e.handsfree.gesture[i].compiledDescription=n}})),t.forEach((function(t){i.push(e.handsfree.gesture[t].compiledDescription)})),t.length&&(this.gestureEstimator=new g.a.GestureEstimator(i))}},{key:"getGesture",value:function(){var e=this,t=[null,null,null,null];return this.data.landmarks.forEach((function(i,n){if(e.data.landmarksVisible[n]){for(var a=[],o=0;o<21;o++)a.push([i[o].x*window.outerWidth,i[o].y*window.outerHeight,0]);var s=e.gestureEstimator.estimate(a,7.5);if(s.gestures.length?t[n]=s.gestures.reduce((function(t,i){var n=e.handsfree.gesture[i.name].confidence;return i.confidence>=n&&i.confidence>t.confidence?i:t})):t[n]={name:"",confidence:0},t[n].name){var d=e.handsfree.gesture[t[n].name].confidence;t[n].confidence<d&&(t[n]={name:"",confidence:0})}t[n].pose=s.poseData}})),t}}]),n}(c),p=function(e){Object(h.a)(n,e);var t,i=Object(l.a)(n);function n(e,t){var a;return Object(o.a)(this,n),(a=i.call(this,e,t)).name="facemesh",a.isWarmedUp=!1,a}return Object(s.a)(n,[{key:"loadDependencies",value:function(e){var t=this;this.handsfree.config.isClient?this.loadDependency("".concat(this.handsfree.config.assetsPath,"/@mediapipe/drawing_utils.js"),(function(){t.onWarmUp(e)}),!!window.drawConnectors):this.loadDependency("".concat(this.handsfree.config.assetsPath,"/@mediapipe/face_mesh/face_mesh.js"),(function(){t.api=new window.FaceMesh({locateFile:function(e){return"".concat(t.handsfree.config.assetsPath,"/@mediapipe/face_mesh/").concat(e)}}),t.api.setOptions(t.handsfree.config.facemesh),t.api.onResults((function(e){return t.dataReceived(e)})),t.handsfree.getUserMedia((function(){t.handsfree.mediapipeWarmups.isWarmingUp?t.handsfree.on("mediapipeWarmedUp",(function(){t.handsfree.mediapipeWarmups.isWarmingUp||t.handsfree.mediapipeWarmups[t.name]||t.warmUp(e)})):t.warmUp(e)})),t.loadDependency("".concat(t.handsfree.config.assetsPath,"/@mediapipe/drawing_utils.js"),null,!!window.drawConnectors)}))}},{key:"warmUp",value:function(e){var t=this;this.handsfree.mediapipeWarmups[this.name]=!0,this.handsfree.mediapipeWarmups.isWarmingUp=!0,this.api.send({image:this.handsfree.debug.$video}).then((function(){t.handsfree.mediapipeWarmups.isWarmingUp=!1,t.onWarmUp(e)}))}},{key:"onWarmUp",value:function(e){this.dependenciesLoaded=!0,document.body.classList.add("handsfree-model-facemesh"),this.handsfree.emit("modelReady",this),this.handsfree.emit("facemeshModelReady",this),this.handsfree.emit("mediapipeWarmedUp",this),e&&e(this)}},{key:"getData",value:(t=Object(r.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.dependenciesLoaded,!e.t0){e.next=4;break}return e.next=4,this.api.send({image:this.handsfree.debug.$video});case 4:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"dataReceived",value:function(e){this.data=e,this.handsfree.data.facemesh=e,this.handsfree.isDebugging&&this.debug(e)}},{key:"debug",value:function(e){if("undefined"!=typeof drawConnectors&&(this.handsfree.debug.context.facemesh.clearRect(0,0,this.handsfree.debug.$canvas.facemesh.width,this.handsfree.debug.$canvas.facemesh.height),e.multiFaceLandmarks)){var t,i=Object(d.a)(e.multiFaceLandmarks);try{for(i.s();!(t=i.n()).done;){var n=t.value;drawConnectors(this.handsfree.debug.context.facemesh,n,FACEMESH_TESSELATION,{color:"#C0C0C070",lineWidth:1}),drawConnectors(this.handsfree.debug.context.facemesh,n,FACEMESH_RIGHT_EYE,{color:"#FF3030"}),drawConnectors(this.handsfree.debug.context.facemesh,n,FACEMESH_RIGHT_EYEBROW,{color:"#FF3030"}),drawConnectors(this.handsfree.debug.context.facemesh,n,FACEMESH_LEFT_EYE,{color:"#30FF30"}),drawConnectors(this.handsfree.debug.context.facemesh,n,FACEMESH_LEFT_EYEBROW,{color:"#30FF30"}),drawConnectors(this.handsfree.debug.context.facemesh,n,FACEMESH_FACE_OVAL,{color:"#E0E0E0"}),drawConnectors(this.handsfree.debug.context.facemesh,n,FACEMESH_LIPS,{color:"#E0E0E0"})}}catch(e){i.e(e)}finally{i.f()}}}}]),n}(c),m=function(e){Object(h.a)(n,e);var t,i=Object(l.a)(n);function n(e,t){var a;return Object(o.a)(this,n),(a=i.call(this,e,t)).name="pose",a.hasLoadedAndRun=!1,a.palmPoints=[0,1,2,5,9,13,17],a}return Object(s.a)(n,[{key:"loadDependencies",value:function(e){var t=this;this.handsfree.config.isClient?this.loadDependency("".concat(this.handsfree.config.assetsPath,"/@mediapipe/drawing_utils.js"),(function(){t.onWarmUp(e)}),!!window.drawConnectors):this.loadDependency("".concat(this.handsfree.config.assetsPath,"/@mediapipe/pose/pose.js"),(function(){t.api=new window.Pose({locateFile:function(e){return"".concat(t.handsfree.config.assetsPath,"/@mediapipe/pose/").concat(e)}}),t.api.setOptions(t.handsfree.config.pose),t.api.onResults((function(e){return t.dataReceived(e)})),t.handsfree.getUserMedia((function(){t.handsfree.mediapipeWarmups.isWarmingUp?t.handsfree.on("mediapipeWarmedUp",(function(){t.handsfree.mediapipeWarmups.isWarmingUp||t.handsfree.mediapipeWarmups[t.name]||t.warmUp(e)})):t.warmUp(e)})),t.loadDependency("".concat(t.handsfree.config.assetsPath,"/@mediapipe/drawing_utils.js"),null,!!window.drawConnectors)}))}},{key:"warmUp",value:function(e){var t=this;this.handsfree.mediapipeWarmups[this.name]=!0,this.handsfree.mediapipeWarmups.isWarmingUp=!0,this.api.send({image:this.handsfree.debug.$video}).then((function(){t.handsfree.mediapipeWarmups.isWarmingUp=!1,t.onWarmUp(e)}))}},{key:"onWarmUp",value:function(e){this.dependenciesLoaded=!0,document.body.classList.add("handsfree-model-pose"),this.handsfree.emit("modelReady",this),this.handsfree.emit("poseModelReady",this),this.handsfree.emit("mediapipeWarmedUp",this),e&&e(this)}},{key:"getData",value:(t=Object(r.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.dependenciesLoaded,!e.t0){e.next=4;break}return e.next=4,this.api.send({image:this.handsfree.debug.$video});case 4:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"dataReceived",value:function(e){this.data=e,this.handsfree.data.pose=e,this.handsfree.isDebugging&&this.debug(e)}},{key:"debug",value:function(e){this.handsfree.debug.context.pose.clearRect(0,0,this.handsfree.debug.$canvas.pose.width,this.handsfree.debug.$canvas.pose.height),e.poseLandmarks&&(drawConnectors(this.handsfree.debug.context.pose,e.poseLandmarks,POSE_CONNECTIONS,{color:"#00FF00",lineWidth:4}),drawLandmarks(this.handsfree.debug.context.pose,e.poseLandmarks,{color:"#FF0000",lineWidth:2}))}}]),n}(c),b=(i(174),i(41)),w=i(327),v=function(e){Object(h.a)(n,e);var t,i=Object(l.a)(n);function n(e,t){var a;return Object(o.a)(this,n),(a=i.call(this,e,t)).name="handpose",a.three={scene:null,camera:null,renderer:null,meshes:[]},a.normalized=[],a.palmPoints=[0,1,2,5,9,13,17],a.gestureEstimator=new g.a.GestureEstimator([]),a}return Object(s.a)(n,[{key:"loadDependencies",value:function(e){var t=this;this.loadDependency("".concat(this.handsfree.config.assetsPath,"/three/three.min.js"),(function(){t.loadDependency("".concat(t.handsfree.config.assetsPath,"/@tensorflow/tf-core.js"),(function(){t.loadDependency("".concat(t.handsfree.config.assetsPath,"/@tensorflow/tf-converter.js"),(function(){t.loadDependency("".concat(t.handsfree.config.assetsPath,"/@tensorflow/tf-backend-").concat(t.handsfree.config.handpose.backend,".js"),(function(){t.loadDependency("".concat(t.handsfree.config.assetsPath,"/@tensorflow-models/handpose/handpose.js"),(function(){t.handsfree.getUserMedia(Object(r.a)(regeneratorRuntime.mark((function i(){return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,window.tf.setBackend(t.handsfree.config.handpose.backend);case 2:return i.next=4,handpose.load(t.handsfree.config.handpose.model);case 4:t.api=i.sent,t.setup3D(),e&&e(t),t.dependenciesLoaded=!0,t.handsfree.emit("modelReady",t),t.handsfree.emit("handposeModelReady",t),document.body.classList.add("handsfree-model-handpose");case 11:case"end":return i.stop()}}),i)}))))}))}))}))}),!!window.tf)}),!!window.THREE)}},{key:"getData",value:(t=Object(r.a)(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.handsfree.debug.$video){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.api.estimateHands(this.handsfree.debug.$video);case 4:return t=e.sent,this.handsfree.data.handpose=this.data=Object(w.a)(Object(w.a)({},t[0]),{},{normalized:this.normalized,meshes:this.three.meshes}),t[0]&&this.updateMeshes(this.data),this.three.renderer.render(this.three.scene,this.three.camera),e.abrupt("return",this.data);case 9:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"setup3D",value:function(){this.three={scene:new window.THREE.Scene,camera:new window.THREE.PerspectiveCamera(90,window.outerWidth/window.outerHeight,.1,1e3),renderer:new THREE.WebGLRenderer({alpha:!0,canvas:this.handsfree.debug.$canvas.handpose}),meshes:[]},this.three.renderer.setSize(window.outerWidth,window.outerHeight),this.three.camera.position.z=this.handsfree.debug.$video.videoWidth/4,this.three.camera.lookAt(new window.THREE.Vector3(0,0,0)),this.three.screen=new window.THREE.Mesh(new window.THREE.BoxGeometry(window.outerWidth,window.outerHeight,1),new window.THREE.MeshNormalMaterial),this.three.screen.position.z=300,this.three.scene.add(this.three.screen),this.three.raycaster=new window.THREE.Raycaster,this.three.arrow=new window.THREE.ArrowHelper(this.three.raycaster.ray.direction,this.three.raycaster.ray.origin,300,16711680),this.three.scene.add(this.three.arrow);for(var e=0;e<21;e++){var t=this.getLandmarkProperty(e).isPalm,i=new window.THREE.Object3D,n=new window.THREE.CylinderGeometry(t?5:10,5,1),a=new window.THREE.MeshNormalMaterial,o=new window.THREE.Mesh(n,a);o.rotation.x=Math.PI/2,i.add(o),this.three.scene.add(i),this.three.meshes.push(i)}var s=new window.THREE.Object3D,d=new window.THREE.CylinderGeometry(5,5,1),r=new window.THREE.MeshNormalMaterial,h=new window.THREE.Mesh(d,r);h.rotation.x=Math.PI/2,this.three.centerPalmObj=s,s.add(h),this.three.scene.add(s),this.three.meshes.push(s),this.three.screen.visible=!1}},{key:"getLandmarkProperty",value:function(e){var t=[0,1,2,5,9,13,17],i=t.indexOf(e),n=-1!=i;return{isPalm:n,next:n?t[(i+1)%t.length]:e-1}}},{key:"updateMeshes",value:function(e){for(var t=0;t<this.three.meshes.length-1;t++){var i=this.getLandmarkProperty(t).next,n=this.webcam2space.apply(this,Object(b.a)(e.landmarks[t])),a=this.webcam2space.apply(this,Object(b.a)(e.landmarks[i])),o=n.clone().lerp(a,.5);if(this.three.meshes[t].position.set(o.x,o.y,o.z),this.normalized[t]=[this.handsfree.normalize(n.x,this.handsfree.debug.$video.videoWidth/-2,this.handsfree.debug.$video.videoWidth/2),this.handsfree.normalize(n.y,this.handsfree.debug.$video.videoHeight/-2,this.handsfree.debug.$video.videoHeight/2),this.three.meshes[t].position.z],this.three.meshes[t].scale.z=n.distanceTo(a),this.three.meshes[t].lookAt(a),8===t){this.three.arrow.position.set(o.x,o.y,o.z);var s=(new window.THREE.Vector3).subVectors(n,o);this.three.arrow.setDirection(s.normalize()),this.three.arrow.setLength(800),this.three.arrow.direction=s}}this.updateCenterPalmMesh(e)}},{key:"updateCenterPalmMesh",value:function(e){var t=this,i=[],n={x:0,y:0,z:0};this.palmPoints.forEach((function(a,o){i.push(t.webcam2space.apply(t,Object(b.a)(e.landmarks[a]))),n.x+=i[o].x,n.y+=i[o].y,n.z+=i[o].z})),n.x=n.x/this.palmPoints.length,n.y=n.y/this.palmPoints.length,n.z=n.z/this.palmPoints.length,this.three.centerPalmObj.position.set(n.x,n.y,n.z),this.three.centerPalmObj.scale.z=10,this.three.centerPalmObj.rotation.x=this.three.meshes[12].rotation.x-Math.PI/2,this.three.centerPalmObj.rotation.y=-this.three.meshes[12].rotation.y,this.three.centerPalmObj.rotation.z=this.three.meshes[12].rotation.z}},{key:"webcam2space",value:function(e,t,i){return new window.THREE.Vector3(e-this.handsfree.debug.$video.videoWidth/2,-(t-this.handsfree.debug.$video.videoHeight/2),-i)}},{key:"updateGestureEstimator",value:function(){var e=this,t=[],i=[];this.gestures.forEach((function(i){if(e.handsfree.gesture[i].enabled&&t.push(i),!e.handsfree.gesture[i].compiledDescription&&e.handsfree.gesture[i].enabled){var n=new g.a.GestureDescription(i);e.handsfree.gesture[i].description.forEach((function(e){switch(e[0]){case"addCurl":n[e[0]](g.a.Finger[e[1]],g.a.FingerCurl[e[2]],e[3]);break;case"addDirection":n[e[0]](g.a.Finger[e[1]],g.a.FingerDirection[e[2]],e[3]);break;case"setWeight":n[e[0]](g.a.Finger[e[1]],e[2])}})),e.handsfree.gesture[i].compiledDescription=n}})),t.forEach((function(t){i.push(e.handsfree.gesture[t].compiledDescription)})),t.length&&(this.gestureEstimator=new g.a.GestureEstimator(i))}},{key:"getGesture",value:function(){var e=null;if(this.data.landmarks&&this.gestureEstimator){var t=this.gestureEstimator.estimate(this.data.landmarks,7.5);t.gestures.length&&(e=t.gestures.reduce((function(e,t){return e.confidence>t.confidence?e:t})))}return e}}]),n}(c),y=function(e){Object(h.a)(i,e);var t=Object(l.a)(i);function i(e,n){var a;return Object(o.a)(this,i),(a=t.call(this,e,n)).name="weboji",a}return Object(s.a)(i,[{key:"loadDependencies",value:function(e){var t=this;this.handsfree.config.isClient?this.onReady(e):this.loadDependency("".concat(this.handsfree.config.assetsPath,"/jeeliz/jeelizFaceTransfer.js"),(function(){var i=t.handsfree.config.assetsPath+"/jeeliz/jeelizFaceTransferNNC.json";t.api=window.JEEFACETRANSFERAPI,fetch(i).then((function(e){return e.json()})).then((function(i){t.api.init({canvasId:"handsfree-canvas-weboji-".concat(t.handsfree.id),NNC:JSON.stringify(i),videoSettings:t.handsfree.config.weboji.videoSettings,callbackReady:function(){return t.onReady(e)}})})).catch((function(e){console.log(e),console.error("Couldn't load weboji tracking model at ".concat(i)),t.handsfree.emit("modelError",e)}))}))}},{key:"onReady",value:function(e){this.dependenciesLoaded=!0,this.handsfree.emit("modelReady",this),this.handsfree.emit("webojiModelReady",this),document.body.classList.add("handsfree-model-weboji"),e&&e(this)}},{key:"getData",value:function(){return this.data.rotation=this.api.get_rotationStabilized(),this.data.translation=this.api.get_positionScale(),this.data.morphs=this.api.get_morphTargetInfluencesStabilized(),this.data.state=this.getStates(),this.data.degree=this.getDegrees(),this.data.isDetected=this.api.is_detected(),this.handsfree.data.weboji=this.data,this.data}},{key:"getDegrees",value:function(){return[180*this.data.rotation[0]/Math.PI,180*this.data.rotation[1]/Math.PI,180*this.data.rotation[2]/Math.PI]}},{key:"getStates",value:function(){var e=this.data.morphs,t=this.data.state||{};return t.smileRight=e[0]>this.handsfree.config.weboji.morphs.threshold.smileRight,t.smileLeft=e[1]>this.handsfree.config.weboji.morphs.threshold.smileLeft,t.smile=t.smileRight&&t.smileLeft,t.smirk=t.smileRight&&!t.smileLeft||!t.smileRight&&t.smileLeft,t.pursed=e[7]>this.handsfree.config.weboji.morphs.threshold.mouthRound,t.browLeftUp=e[4]>this.handsfree.config.weboji.morphs.threshold.browLeftUp,t.browRightUp=e[5]>this.handsfree.config.weboji.morphs.threshold.browRightUp,t.browsUp=e[4]>this.handsfree.config.weboji.morphs.threshold.browLeftUp&&e[5]>this.handsfree.config.weboji.morphs.threshold.browLeftUp,t.browLeftDown=e[2]>this.handsfree.config.weboji.morphs.threshold.browLeftDown,t.browRightDown=e[3]>this.handsfree.config.weboji.morphs.threshold.browRightDown,t.browsDown=e[2]>this.handsfree.config.weboji.morphs.threshold.browLeftDown&&e[3]>this.handsfree.config.weboji.morphs.threshold.browLeftDown,t.browsUpDown=t.browLeftDown&&t.browRightUp||t.browRightDown&&t.browLeftUp,t.eyeLeftClosed=e[8]>this.handsfree.config.weboji.morphs.threshold.eyeLeftClosed,t.eyeRightClosed=e[9]>this.handsfree.config.weboji.morphs.threshold.eyeRightClosed,t.eyesClosed=t.eyeLeftClosed&&t.eyeRightClosed,t.mouthClosed=0===e[6],t.mouthOpen=e[6]>this.handsfree.config.weboji.morphs.threshold.mouthOpen,t}}]),i}(c),D=i(62),C=i(330),k=i.n(C),x=function(){function e(t,i){var n,a,s=this;Object(o.a)(this,e),this.plugin=t,this.handsfree=i,Object.keys(t).forEach((function(e){s[e]=t[e]}));var d=null===(n=i.config)||void 0===n||null===(a=n.plugin)||void 0===a?void 0:a[t.name];"boolean"==typeof d&&(d={enabled:d}),"object"===Object(D.a)(d)&&(k()(this.config,d),"boolean"==typeof d.enabled&&(this.enabled=d.enabled))}return Object(s.a)(e,[{key:"enable",value:function(){!this.enabled&&this.onEnable&&this.onEnable(this.handsfree),this.enabled=!0}},{key:"disable",value:function(){this.enabled&&this.onDisable&&this.onDisable(this.handsfree),this.enabled=!1}}]),e}(),L=function(e){Object(h.a)(i,e);var t=Object(l.a)(i);function i(e,n){var a;return Object(o.a)(this,i),(a=t.call(this,e,n)).algorithm="fingerpose",a.compiledDescription=null,a}return i}(function(){function e(t,i){var n,a,s=this;Object(o.a)(this,e),this.handsfree=i,Object.keys(t).forEach((function(e){s[e]=t[e]}));var d=null===(n=i.config)||void 0===n||null===(a=n.gesture)||void 0===a?void 0:a[t.name];"boolean"==typeof d&&(d={enabled:d}),"object"===Object(D.a)(d)&&(k()(this.config,d),"boolean"==typeof d.enabled&&(this.enabled=d.enabled))}return Object(s.a)(e,[{key:"enable",value:function(){this.enabled=!0,this.updateGestureEstimator()}},{key:"disable",value:function(){this.enabled=!1,this.updateGestureEstimator()}},{key:"updateGestureEstimator",value:function(){var e=this;this.models.forEach((function(t){e.handsfree.model[t].updateGestureEstimator()}))}}]),e}()),R={autostart:!1,assetsPath:"https://unpkg.com/handsfree@8.3.0/build/lib/assets",isClient:!1,gesture:{},setup:{canvas:{weboji:{$el:null,width:1280,height:720},hands:{$el:null,width:1280,height:720},handpose:{$el:null,width:1280,height:720},pose:{$el:null,width:1280,height:720},facemesh:{$el:null,width:1280,height:720}},video:{$el:null,width:1280,height:720},wrap:{$el:null,$parent:null}},weboji:{enabled:!1,throttle:0,videoSettings:{videoElement:null,deviceId:null,facingMode:"user",idealWidth:320,idealHeight:240,minWidth:240,maxWidth:1280,minHeight:240,maxHeight:1280},morphs:{threshold:{smileRight:.7,smileLeft:.7,browLeftDown:.8,browRightDown:.8,browLeftUp:.8,browRightUp:.8,eyeLeftClosed:.4,eyeRightClosed:.4,mouthOpen:.3,mouthRound:.8,upperLip:.5}}},hands:{enabled:!1,maxNumHands:2,minDetectionConfidence:.5,minTrackingConfidence:.5},facemesh:{enabled:!1,maxNumFaces:1,minDetectionConfidence:.5,minTrackingConfidence:.5},pose:{enabled:!1,upperBodyOnly:!1,smoothLandmarks:!0,minDetectionConfidence:.5,minTrackingConfidence:.5},handpose:{enabled:!1,backend:"webgl",maxContinuousChecks:1/0,detectionConfidence:.8,iouThreshold:.3,scoreThreshold:.75},plugin:{}},E=i(363),U=i.n(E),P=i(428),T={models:"weboji",enabled:!1,tags:["browser"],$pointer:null,pointer:{x:-20,y:-20},tween:{x:0,y:0,positionList:[]},config:{offset:{x:0,y:0,pitch:10,yaw:0,roll:0},speed:{x:1,y:1}},onEnable:function(){var e;if(!this.$pointer){var t=document.createElement("div");t.classList.add("handsfree-pointer","handsfree-pointer-face","handsfree-hide-when-started-without-weboji"),document.body.appendChild(t),this.$pointer=t}null===(e=this.$pointer)||void 0===e||e.classList.remove("handsfree-hidden")},onFrame:function(e){var t=e.weboji,i=t.translation[0]*window.outerWidth,n=window.outerHeight-t.translation[1]*window.outerHeight,a=(1-t.translation[2])*window.outerWidth*2.5;i+=a*Math.tan(t.rotation[1]+this.config.offset.yaw*Math.PI/180)*this.config.speed.x,n+=a*Math.tan(t.rotation[0]+this.config.offset.pitch*Math.PI/180)*this.config.speed.y-window.outerHeight,i+=this.config.offset.x,n+=this.config.offset.y,this.handsfree.TweenMax.to(this.tween,1,{x:i,y:n,overwrite:!0,ease:"linear.easeNone",immediateRender:!0}),this.$pointer.style.left="".concat(this.tween.x,"px"),this.$pointer.style.top="".concat(this.tween.y,"px"),t.pointer={x:this.tween.x,y:this.tween.y}},onDisable:function(){var e;null===(e=this.$pointer)||void 0===e||e.classList.add("handsfree-hidden")}},j={models:"weboji",enabled:!1,tags:["browser"],config:{throttle:50,maxMouseDownedFrames:1,morphs:{0:.25,1:.25}},mouseDowned:0,mouseUp:!1,thresholdMet:!1,lastHeld:{x:0,y:0},$origTarget:null,onFrame:function(e){var t=this,i=e.weboji;this.thresholdMet=!1;var n="";Object.keys(this.config.morphs).forEach((function(e){var n=+t.config.morphs[e];n>0&&i.morphs[e]>=n&&(t.thresholdMet=!0)})),this.thresholdMet?(this.mouseDowned++,document.body.classList.add("handsfree-clicked")):(this.mouseUp=this.mouseDowned,this.mouseDowned=0,document.body.classList.remove("handsfree-clicked")),n=this.mouseDowned>0&&this.mouseDowned<=this.config.maxMouseDownedFrames?i.pointer.state="mousedown":this.mouseDowned>this.config.maxMouseDownedFrames?i.pointer.state="mousedrag":this.mouseUp?i.pointer.state="mouseup":"mousemove";var a=document.elementFromPoint(i.pointer.x,i.pointer.y);if(a&&"mousedown"===n&&(this.$origTarget=a),a){var o={view:window,button:0,bubbles:!0,cancelable:!0,clientX:i.pointer.x,clientY:i.pointer.y,movementX:i.pointer.x-this.lastHeld.x,movementY:i.pointer.y-this.lastHeld.y};a.dispatchEvent(new MouseEvent(n,o)),"mousedown"===i.pointer.state&&["INPUT","TEXTAREA","BUTTON","A"].includes(a.nodeName)&&a.focus(),"mouseup"===i.pointer.state&&a===this.$origTarget&&a.dispatchEvent(new MouseEvent("click",o)),i.pointer.$target=a}this.lastHeld=i.pointer}},F={models:"weboji",enabled:!1,tags:["browser"],numFramesFocused:0,$lastTarget:null,$target:null,config:{framesToFocus:10,vertScroll:{scrollSpeed:.05,scrollZone:100}},onUse:function(){this.$target=window},onFrame:function(e){var t=e.weboji;if(t.pointer.x||t.pointer.y){this.checkForFocus(t);var i,n=!1,a=this.getTargetScrollTop();i=this.$target.getBoundingClientRect?this.$target.getBoundingClientRect():{top:0,bottom:window.innerHeight},"mouseDown"===t.pointer.state&&(this.numFramesFocused=0,this.maybeSetTarget(t)),t.pointer.y<i.top+this.config.vertScroll.scrollZone&&(this.$target.scrollTo(0,a+(t.pointer.y-i.top-this.config.vertScroll.scrollZone)*this.config.vertScroll.scrollSpeed),n=!0),t.pointer.y>i.bottom-this.config.vertScroll.scrollZone&&(this.$target.scrollTo(0,a-(i.bottom-t.pointer.y-this.config.vertScroll.scrollZone)*this.config.vertScroll.scrollSpeed),n=!0),n&&this.maybeSelectNewTarget()}},maybeSelectNewTarget:function(){var e=this.getTargetScrollTop(),t=!1;this.$target.scrollTo(0,e+this.config.vertScroll.scrollSpeed),e===this.getTargetScrollTop()?(t=!0,this.$target.scrollTo(0,e-this.config.vertScroll.scrollSpeed),e===this.getTargetScrollTop()?t&&(this.numFramesFocused=0,this.selectTarget(this.recursivelyFindScrollbar(this.$target.parentElement))):this.$target.scrollTo(0,e+this.config.vertScroll.scrollSpeed)):this.$target.scrollTo(0,e-this.config.vertScroll.scrollSpeed)},getTargetScrollTop:function(){var e,t;return(null===(e=this.$target)||void 0===e?void 0:e.scrollY)||(null===(t=this.$target)||void 0===t?void 0:t.scrollTop)||0},checkForFocus:U()((function(e){var t=document.elementFromPoint(e.pointer.x,e.pointer.y);t&&((t=this.recursivelyFindScrollbar(t))===this.$lastTarget?++this.numFramesFocused:this.numFramesFocused=0,this.numFramesFocused>this.config.framesToFocus&&this.selectTarget(t),this.$lastTarget=t)}),100),selectTarget:function(e){this.$target.classList&&this.$target.classList.remove("handsfree-scroll-focus"),e&&e.classList&&e.classList.add("handsfree-scroll-focus"),"HTML"!==e.nodeName&&e.nodeName||(e=window),this.$target=e},maybeSetTarget:function(e){"mouseDown"===e.pointer.state&&e.pointer.$target&&this.selectTarget(this.recursivelyFindScrollbar(e.pointer.$target))},recursivelyFindScrollbar:function(e){var t=e&&e.getBoundingClientRect?getComputedStyle(e):{};return e&&e.scrollHeight>e.clientHeight&&("auto"===t.overflow||"auto scroll"===t.overflow||"auto"===t.overflowY||"auto scroll"===t.overflowY)?e:e&&e.parentElement?this.recursivelyFindScrollbar(e.parentElement):window}},M={models:"hands",tags:["browser"],enabled:!1,numFramesFocused:[0,0,0,0],$target:[null,null,null,null],origScrollLeft:[0,0,0,0],origScrollTop:[0,0,0,0],tweenScroll:[{x:0,y:0},{x:0,y:0},{x:0,y:0},{x:0,y:0}],config:{framesToFocus:10,threshold:50,numThresholdErrorFrames:5,speed:1},onFrame:function(e){var t=this,i=e.hands;setTimeout((function(){if(i.pointer){var e=t.handsfree.debug.$canvas.hands.height,n=t.handsfree.debug.$canvas.hands.width;i.pointer.forEach((function(a,o){var s,d;if(a.isVisible&&!(o>i.origPinch.length)){if("start"===(null===(s=i.pinchState[o])||void 0===s?void 0:s[0])){var r=document.elementFromPoint(a.x,a.y);t.$target[o]=t.getTarget(r),t.tweenScroll[o].x=t.origScrollLeft[o]=t.getTargetScrollLeft(t.$target[o]),t.tweenScroll[o].y=t.origScrollTop[o]=t.getTargetScrollTop(t.$target[o]),t.handsfree.TweenMax.killTweensOf(t.tweenScroll[o])}"held"===(null===(d=i.pinchState[o])||void 0===d?void 0:d[0])&&t.$target[o]&&(t.handsfree.TweenMax.to(t.tweenScroll[o],1,{x:t.tweenScroll[o].x-(i.origPinch[o][0].x-i.curPinch[o][0].x)*n*t.config.speed,y:t.tweenScroll[o].y+(i.origPinch[o][0].y-i.curPinch[o][0].y)*e*t.config.speed,overwrite:!0,ease:"linear.easeNone",immediateRender:!0}),t.$target[o].scrollTo(t.tweenScroll[o].x,t.tweenScroll[o].y))}}))}}))},getTarget:function(e){var t=e&&e.getBoundingClientRect?getComputedStyle(e):{};return e&&e.scrollHeight>e.clientHeight&&("auto"===t.overflow||"auto scroll"===t.overflow||"auto"===t.overflowY||"auto scroll"===t.overflowY)?e:e&&e.parentElement?this.getTarget(e.parentElement):window},getTargetScrollLeft:function(e){return e.scrollX||e.scrollLeft||0},getTargetScrollTop:function(e){return e.scrollY||e.scrollTop||0}},$=i(320),H=(n={models:"hands",enabled:!0,tags:["core"],fingertipIndex:[8,12,16,20],numFramesFocused:[[0,0,0,0],[0,0,0,0]],thresholdMet:[[0,0,0,0],[0,0,0,0]],framesSinceLastGrab:[[0,0,0,0],[0,0,0,0]],origPinch:[[{x:0,y:0},{x:0,y:0},{x:0,y:0},{x:0,y:0}],[{x:0,y:0},{x:0,y:0},{x:0,y:0},{x:0,y:0}]],curPinch:[[{x:0,y:0},{x:0,y:0},{x:0,y:0},{x:0,y:0}],[{x:0,y:0},{x:0,y:0},{x:0,y:0},{x:0,y:0}]],pinchDowned:[[0,0,0,0],[0,0,0,0]],pinchDown:[[!1,!1,!1,!1],[!1,!1,!1,!1]],pinchUp:[[!1,!1,!1,!1],[!1,!1,!1,!1]],tween:[[{x:0,y:0},{x:0,y:0},{x:0,y:0},{x:0,y:0}],[{x:0,y:0},{x:0,y:0},{x:0,y:0},{x:0,y:0}]]},Object($.a)(n,"numFramesFocused",[[0,0,0,0],[0,0,0,0]]),Object($.a)(n,"mouseDowned",0),Object($.a)(n,"mouseUp",!1),Object($.a)(n,"mouseThresholdMet",!1),Object($.a)(n,"config",{framesToFocus:10,threshold:50,numThresholdErrorFrames:5,maxMouseDownedFrames:1}),Object($.a)(n,"onUse",(function(){this.$target=window})),Object($.a)(n,"onFrame",(function(e){var t=e.hands;if(t.multiHandLandmarks){for(var i=this.handsfree.debug.$canvas.hands.height,n=t.multiHandedness.some((function(e){return"Right"===e.label})),a=t.multiHandedness.some((function(e){return"Left"===e.label})),o=0;o<t.multiHandLandmarks.length;o++)for(var s="Right"===t.multiHandedness[o].label?0:1,d=0;d<4;d++){var r=t.multiHandLandmarks[o][4].x-t.multiHandLandmarks[o][this.fingertipIndex[d]].x,h=t.multiHandLandmarks[o][4].y-t.multiHandLandmarks[o][this.fingertipIndex[d]].y,l=Math.sqrt(r*r+h*h)*i;(this.thresholdMet[s][d]=l<this.config.threshold)&&(this.curPinch[s][d]=t.multiHandLandmarks[o][4],this.framesSinceLastGrab[s][d]>this.config.numThresholdErrorFrames&&(this.origPinch[s][d]=t.multiHandLandmarks[o][4],this.handsfree.TweenMax.killTweensOf(this.tween[s][d])),this.framesSinceLastGrab[s][d]=0),++this.framesSinceLastGrab[s][d]}t.origPinch=this.origPinch,t.curPinch=this.curPinch,this.handsfree.data.hands=this.getPinchStates(t,n,a)}})),Object($.a)(n,"getPinchStates",(function(e,t,i){var n=[t,i];e.pinchState=[["","","",""],["","","",""]];for(var a=0;a<2;a++)for(var o=0;o<4;o++)n[a]&&this.thresholdMet[a][o]?(this.pinchDowned[a][o]++,document.body.classList.add("handsfree-finger-pinched-".concat(a,"-").concat(o),"handsfree-finger-pinched-".concat(o))):(this.pinchUp[a][o]=this.pinchDowned[a][o],this.pinchDowned[a][o]=0,document.body.classList.remove("handsfree-finger-pinched-".concat(a,"-").concat(o),"handsfree-finger-pinched-".concat(o))),this.pinchDowned[a][o]>0&&this.pinchDowned[a][o]<=this.config.maxMouseDownedFrames?e.pinchState[a][o]="start":this.pinchDowned[a][o]>this.config.maxMouseDownedFrames?e.pinchState[a][o]="held":this.pinchUp[a][o]?e.pinchState[a][o]="released":e.pinchState[a][o]="",e.pinchState[a][o]&&(this.handsfree.emit("finger-pinched-".concat(a,"-").concat(o),{event:e.pinchState[a][o],origPinch:e.origPinch[a][o],curPinch:e.curPinch[a][o]}),this.handsfree.emit("finger-pinched-".concat(e.pinchState[a][o],"-").concat(a,"-").concat(o),{event:e.pinchState[a][o],origPinch:e.origPinch[a][o],curPinch:e.curPinch[a][o]}),this.handsfree.emit("finger-pinched-".concat(o),{event:e.pinchState[a][o],origPinch:e.origPinch[a][o],curPinch:e.curPinch[a][o]}),this.handsfree.emit("finger-pinched-".concat(e.pinchState[a][o],"-").concat(o),{event:e.pinchState[a][o],origPinch:e.origPinch[a][o],curPinch:e.curPinch[a][o]}));return e})),n),O={start:"mousedown",held:"mousemove",released:"mouseup"},S=[{x:0,y:0},{x:0,y:0},{x:0,y:0},{x:0,y:0}],W={facePointer:T,faceClick:j,faceScroll:F,pinchScroll:M,pinchers:H,palmPointers:(a={models:"hands",tags:["browser"],enabled:!1,$pointer:[],arePointersVisible:!0,pointer:[{x:-20,y:-20,isVisible:!1},{x:-20,y:-20,isVisible:!1},{x:-20,y:-20,isVisible:!1},{x:-20,y:-20,isVisible:!1}],tween:[{x:-20,y:-20},{x:-20,y:-20},{x:-20,y:-20},{x:-20,y:-20}],config:{offset:{x:0,y:0},speed:{x:1,y:1}},onUse:function(){for(var e=0;e<4;e++){var t=document.createElement("div");t.classList.add("handsfree-pointer","handsfree-pointer-palm","handsfree-hide-when-started-without-hands"),document.body.appendChild(t),this.$pointer[e]=t}this.enabled&&this.arePointersVisible?this.showPointers():this.hidePointers()},onEnable:function(){var e=this.arePointersVisible;this.showPointers(),this.arePointersVisible=e},onDisable:function(){var e=this.arePointersVisible;this.hidePointers(),this.arePointersVisible=e},onFrame:function(e){var t=this,i=e.hands;null!=i&&i.multiHandLandmarks?(i.pointer=[{isVisible:!1},{isVisible:!1},{isVisible:!1},{isVisible:!1}],i.multiHandLandmarks.forEach((function(e,n){var a,o,s,d=i.pointer[n];s=n<2?"Right"===i.multiHandedness[n].label?0:1:"Right"===i.multiHandedness[n].label?2:3,t.handsfree.TweenMax.to(t.tween[s],1,{x:window.outerWidth*t.config.speed.x-window.outerWidth*t.config.speed.x/2+window.outerWidth/2-i.multiHandLandmarks[n][21].x*t.config.speed.x*window.outerWidth+t.config.offset.x,y:i.multiHandLandmarks[n][21].y*window.outerHeight*t.config.speed.y-window.outerHeight*t.config.speed.y/2+window.outerHeight/2+t.config.offset.y,overwrite:!0,ease:"linear.easeNone",immediate:!0}),i.pointer[s]={x:t.tween[s].x,y:t.tween[s].y,isVisible:!0},t.$pointer[s].style.left="".concat(t.tween[s].x,"px"),t.$pointer[s].style.top="".concat(t.tween[s].y,"px");var r=null==d||null===(a=d.pinchState)||void 0===a||null===(o=a[n])||void 0===o?void 0:o[0];if(r&&d.isVisible){r=O[r];var h=document.elementFromPoint(d.x,d.y);h&&h.dispatchEvent(new MouseEvent(r,{view:window,button:0,bubbles:!0,cancelable:!0,clientX:d.x,clientY:d.y,movementX:d.x-S[s].x,movementY:d.y-S[s].y})),S[s]=d}})),i.pointer.forEach((function(e,i){e.isVisible?t.$pointer[i].style.display="block":t.$pointer[i].style.display="none"}))):this.$pointer.forEach((function(e){return e.style.display="none"}))}},Object($.a)(a,"onDisable",(function(){this.$pointer.forEach((function(e){e.classList.add("handsfree-hidden")}))})),Object($.a)(a,"showPointers",(function(){this.arePointersVisible=!0;for(var e=0;e<4;e++)this.$pointer[e].classList.remove("handsfree-hidden")})),Object($.a)(a,"hidePointers",(function(){this.arePointersVisible=!1;for(var e=0;e<4;e++)this.$pointer[e].classList.add("handsfree-hidden")})),a)},I={love:{name:"love",algorithm:"fingerpose",models:"hands",tags:["core"],confidence:7.5,description:[["addCurl","Thumb","NoCurl",1],["addDirection","Thumb","DiagonalUpLeft",1],["addDirection","Thumb","HorizontalLeft",.5789473684210527],["addCurl","Index","NoCurl",1],["addDirection","Index","VerticalUp",1],["addDirection","Index","DiagonalUpLeft",.875],["addCurl","Middle","FullCurl",1],["addDirection","Middle","VerticalUp",1],["addDirection","Middle","DiagonalUpLeft",1],["addCurl","Ring","FullCurl",1],["addDirection","Ring","VerticalUp",1],["addDirection","Ring","DiagonalUpRight",.18181818181818182],["addDirection","Ring","DiagonalUpLeft",.18181818181818182],["addCurl","Pinky","NoCurl",1],["addDirection","Pinky","VerticalUp",1],["addDirection","Pinky","DiagonalUpRight",.47368421052631576],["addDirection","Pinky","DiagonalUpLeft",.10526315789473684],["setWeight","Thumb",2],["setWeight","Index",2],["setWeight","Pinky",2]],enabled:!1},horns:{name:"horns",algorithm:"fingerpose",models:"hands",tags:["core"],confidence:7.5,description:[["addCurl","Thumb","HalfCurl",1],["addDirection","Thumb","DiagonalUpRight",.1],["addDirection","Thumb","VerticalUp",1],["addDirection","Thumb","DiagonalUpLeft",.4],["addCurl","Index","NoCurl",1],["addDirection","Index","VerticalUp",.875],["addDirection","Index","DiagonalUpLeft",1],["addCurl","Middle","FullCurl",1],["addDirection","Middle","DiagonalUpLeft",1],["addDirection","Middle","VerticalUp",.875],["addCurl","Ring","FullCurl",1],["addDirection","Ring","DiagonalUpRight",.08695652173913043],["addDirection","Ring","VerticalUp",1],["addDirection","Ring","DiagonalUpLeft",.21739130434782608],["addCurl","Pinky","NoCurl",1],["addDirection","Pinky","DiagonalUpRight",.42857142857142855],["addDirection","Pinky","VerticalUp",1],["setWeight","Thumb",2],["setWeight","Index",2],["setWeight","Pinky",2]],enabled:!1},pointRight:{name:"pointRight",algorithm:"fingerpose",models:"hands",tags:["core"],confidence:"7.5",description:[["addCurl","Thumb","NoCurl",1],["addDirection","Thumb","HorizontalLeft",1],["addCurl","Index","NoCurl",1],["addDirection","Index","DiagonalUpLeft",.42857142857142855],["addDirection","Index","HorizontalLeft",1],["addCurl","Middle","FullCurl",1],["addDirection","Middle","DiagonalUpLeft",.42857142857142855],["addDirection","Middle","HorizontalLeft",1],["addCurl","Ring","FullCurl",1],["addDirection","Ring","HorizontalLeft",1],["addDirection","Ring","DiagonalUpLeft",.034482758620689655],["addCurl","Pinky","FullCurl",1],["addDirection","Pinky","HorizontalLeft",1],["addDirection","Pinky","DiagonalDownLeft",.07142857142857142],["setWeight","Index",2]],enabled:!1},pointLeft:{name:"pointLeft",algorithm:"fingerpose",models:"hands",tags:["core"],confidence:"7.5",description:[["addCurl","Thumb","HalfCurl",.15384615384615385],["addCurl","Thumb","NoCurl",1],["addDirection","Thumb","HorizontalRight",1],["addCurl","Index","NoCurl",1],["addDirection","Index","HorizontalRight",1],["addDirection","Index","DiagonalUpRight",.42857142857142855],["addCurl","Middle","HalfCurl",.2222222222222222],["addCurl","Middle","FullCurl",1],["addCurl","Middle","NoCurl",.4444444444444444],["addDirection","Middle","HorizontalRight",1],["addDirection","Middle","DiagonalUpRight",.42857142857142855],["addCurl","Ring","FullCurl",1],["addCurl","Ring","HalfCurl",.07142857142857142],["addDirection","Ring","HorizontalRight",1],["addCurl","Pinky","FullCurl",1],["addCurl","Pinky","HalfCurl",.034482758620689655],["addDirection","Pinky","HorizontalRight",1],["setWeight","Index",2]],enabled:!1},pointUp:{name:"pointUp",algorithm:"fingerpose",models:"hands",tags:["core"],confidence:"7.5",description:[["addCurl","Thumb","HalfCurl",1],["addDirection","Thumb","VerticalUp",1],["addDirection","Thumb","DiagonalUpRight",.35],["addDirection","Thumb","DiagonalUpLeft",.15],["addCurl","Index","NoCurl",1],["addDirection","Index","VerticalUp",1],["addDirection","Index","DiagonalUpLeft",.25],["addCurl","Middle","FullCurl",1],["addDirection","Middle","DiagonalUpLeft",1],["addDirection","Middle","VerticalUp",.5],["addCurl","Ring","FullCurl",1],["addDirection","Ring","DiagonalUpLeft",1],["addDirection","Ring","VerticalUp",.5294117647058824],["addDirection","Ring","DiagonalUpRight",.23529411764705882],["addCurl","Pinky","FullCurl",1],["addDirection","Pinky","DiagonalUpRight",1],["addDirection","Pinky","VerticalUp",.7692307692307693],["addDirection","Pinky","DiagonalUpLeft",.5384615384615384],["setWeight","Index",2]],enabled:!1},pointDown:{name:"pointDown",algorithm:"fingerpose",models:"hands",tags:["core"],confidence:"7.5",description:[["addCurl","Thumb","NoCurl",1],["addDirection","Thumb","VerticalDown",.7647058823529411],["addDirection","Thumb","DiagonalDownRight",1],["addCurl","Index","NoCurl",1],["addDirection","Index","VerticalDown",1],["addDirection","Index","DiagonalDownLeft",.15384615384615385],["addCurl","Middle","FullCurl",1],["addDirection","Middle","VerticalDown",1],["addDirection","Middle","DiagonalDownRight",.034482758620689655],["addCurl","Ring","FullCurl",1],["addDirection","Ring","VerticalDown",1],["addDirection","Ring","DiagonalDownRight",.1111111111111111],["addCurl","Pinky","FullCurl",1],["addDirection","Pinky","DiagonalDownRight",1],["addDirection","Pinky","VerticalDown",.6666666666666666],["setWeight","Index",2]],enabled:!1},spock:{name:"spock",algorithm:"fingerpose",models:"hands",tags:["core"],confidence:"7.5",description:[["addCurl","Thumb","NoCurl",1],["addDirection","Thumb","DiagonalUpLeft",1],["addDirection","Thumb","HorizontalLeft",.5789473684210527],["addCurl","Index","NoCurl",1],["addDirection","Index","VerticalUp",1],["addDirection","Index","DiagonalUpLeft",.7647058823529411],["addCurl","Middle","NoCurl",1],["addDirection","Middle","VerticalUp",1],["addDirection","Middle","DiagonalUpLeft",1],["addCurl","Ring","NoCurl",1],["addDirection","Ring","DiagonalUpRight",1],["addDirection","Ring","VerticalUp",1],["addCurl","Pinky","NoCurl",1],["addDirection","Pinky","DiagonalUpRight",1],["addDirection","Pinky","VerticalUp",.7647058823529411]],enabled:!1},callMe:{name:"callMe",algorithm:"fingerpose",models:"hands",tags:["core"],confidence:"7.5",description:[["addCurl","Thumb","NoCurl",1],["addDirection","Thumb","DiagonalUpLeft",1],["addDirection","Thumb","HorizontalLeft",.36363636363636365],["addCurl","Index","FullCurl",1],["addDirection","Index","HorizontalLeft",1],["addDirection","Index","DiagonalUpLeft",.36363636363636365],["addCurl","Middle","FullCurl",1],["addDirection","Middle","HorizontalLeft",1],["addDirection","Middle","DiagonalDownLeft",.1111111111111111],["addCurl","Ring","FullCurl",1],["addDirection","Ring","HorizontalLeft",1],["addDirection","Ring","DiagonalDownLeft",.30434782608695654],["addCurl","Pinky","NoCurl",1],["addDirection","Pinky","HorizontalLeft",1],["addDirection","Pinky","DiagonalDownLeft",.7647058823529411],["setWeight","Thumb",2],["setWeight","Pinky",2]],enabled:!1},ok:{name:"ok",algorithm:"fingerpose",models:"hands",tags:["core"],confidence:"7.5",description:[["addCurl","Thumb","HalfCurl",1],["addCurl","Thumb","NoCurl",.6666666666666666],["addDirection","Thumb","DiagonalUpLeft",1],["addDirection","Thumb","HorizontalLeft",.25],["addCurl","Index","FullCurl",1],["addCurl","Index","HalfCurl",.7647058823529411],["addDirection","Index","DiagonalUpLeft",1],["addCurl","Middle","NoCurl",1],["addDirection","Middle","DiagonalUpLeft",.7647058823529411],["addDirection","Middle","VerticalUp",1],["addCurl","Ring","NoCurl",1],["addDirection","Ring","VerticalUp",1],["addDirection","Ring","DiagonalUpRight",.8666666666666667],["addDirection","Ring","DiagonalUpLeft",.13333333333333333],["addCurl","Pinky","NoCurl",1],["addDirection","Pinky","VerticalUp",.5],["addDirection","Pinky","DiagonalUpRight",1],["setWeight","Thumb",2],["setWeight","Index",2]],enabled:!1},stop:{name:"stop",algorithm:"fingerpose",models:"hands",tags:["core"],confidence:"7.5",description:[["addCurl","Thumb","NoCurl",1],["addDirection","Thumb","DiagonalUpLeft",.6666666666666666],["addDirection","Thumb","VerticalUp",1],["addCurl","Index","NoCurl",1],["addDirection","Index","DiagonalUpLeft",.42857142857142855],["addDirection","Index","VerticalUp",1],["addCurl","Middle","NoCurl",1],["addDirection","Middle","DiagonalUpLeft",.42857142857142855],["addDirection","Middle","VerticalUp",1],["addCurl","Ring","NoCurl",1],["addDirection","Ring","DiagonalUpLeft",.38095238095238093],["addDirection","Ring","VerticalUp",1],["addDirection","Ring","DiagonalUpRight",.047619047619047616],["addCurl","Pinky","NoCurl",1],["addDirection","Pinky","VerticalUp",1],["addDirection","Pinky","DiagonalUpRight",.13043478260869565],["addDirection","Pinky","DiagonalUpLeft",.17391304347826086]],enabled:!0},victory:{name:"victory",algorithm:"fingerpose",models:"hands",tags:["core"],confidence:"7.5",description:[["addCurl","Thumb","NoCurl",1],["addCurl","Thumb","HalfCurl",.5789473684210527],["addDirection","Thumb","DiagonalUpRight",1],["addDirection","Thumb","VerticalUp",.42857142857142855],["addCurl","Index","NoCurl",1],["addDirection","Index","VerticalUp",.875],["addDirection","Index","DiagonalUpLeft",1],["addCurl","Middle","NoCurl",1],["addDirection","Middle","VerticalUp",1],["addDirection","Middle","DiagonalUpRight",.36363636363636365],["addCurl","Ring","FullCurl",1],["addDirection","Ring","DiagonalUpRight",.5789473684210527],["addDirection","Ring","VerticalUp",1],["addCurl","Pinky","FullCurl",1],["addDirection","Pinky","DiagonalUpRight",.6666666666666666],["addDirection","Pinky","VerticalUp",1],["setWeight","Index",2],["setWeight","Middle",2]],enabled:!1},fist:{name:"fist",algorithm:"fingerpose",models:"hands",tags:["core"],confidence:"7.5",description:[["addCurl","Thumb","HalfCurl",1],["addDirection","Thumb","VerticalUp",1],["addDirection","Thumb","DiagonalUpRight",.6428571428571429],["addDirection","Thumb","DiagonalUpLeft",.5],["addCurl","Index","FullCurl",1],["addDirection","Index","DiagonalUpLeft",1],["addDirection","Index","VerticalUp",.15384615384615385],["addCurl","Middle","FullCurl",1],["addDirection","Middle","VerticalUp",.7647058823529411],["addDirection","Middle","DiagonalUpLeft",1],["addCurl","Ring","FullCurl",1],["addDirection","Ring","VerticalUp",1],["addDirection","Ring","DiagonalUpRight",.26666666666666666],["addDirection","Ring","DiagonalUpLeft",.7333333333333333],["addCurl","Pinky","FullCurl",1],["addDirection","Pinky","DiagonalUpRight",1],["addDirection","Pinky","VerticalUp",1]],enabled:!1},thumbUp:{name:"thumbUp",algorithm:"fingerpose",models:"hands",tags:["core"],confidence:"7.5",description:[["addCurl","Thumb","NoCurl",1],["addDirection","Thumb","DiagonalUpLeft",1],["addDirection","Thumb","VerticalUp",.5789473684210527],["addCurl","Index","FullCurl",1],["addDirection","Index","DiagonalUpLeft",1],["addDirection","Index","HorizontalLeft",.2],["addCurl","Middle","FullCurl",1],["addDirection","Middle","HorizontalLeft",1],["addDirection","Middle","DiagonalUpLeft",.7647058823529411],["addCurl","Ring","FullCurl",1],["addDirection","Ring","HorizontalLeft",1],["addDirection","Ring","DiagonalUpLeft",.07142857142857142],["addCurl","Pinky","FullCurl",1],["addDirection","Pinky","HorizontalLeft",1],["setWeight","Thumb",2]],enabled:!1},thumbDown:{name:"thumbDown",algorithm:"fingerpose",models:"hands",tags:["core"],confidence:"7.5",description:[["addCurl","Thumb","NoCurl",1],["addDirection","Thumb","DiagonalDownLeft",1],["addDirection","Thumb","VerticalDown",.5789473684210527],["addCurl","Index","FullCurl",1],["addDirection","Index","DiagonalDownLeft",1],["addDirection","Index","HorizontalLeft",.2],["addCurl","Middle","FullCurl",1],["addDirection","Middle","DiagonalDownLeft",1],["addDirection","Middle","HorizontalLeft",.6666666666666666],["addCurl","Ring","FullCurl",1],["addDirection","Ring","HorizontalLeft",1],["addDirection","Ring","DiagonalDownLeft",.30434782608695654],["addCurl","Pinky","FullCurl",1],["addDirection","Pinky","HorizontalLeft",1],["addDirection","Pinky","DiagonalUpLeft",.15384615384615385],["setWeight","Thumb",2]],enabled:!1}},V=0,N=function(){function e(){var t=this,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(o.a)(this,e),this.throttle=U.a,this.TweenMax=P.a,this.id=++V,this.version="8.3.0",this.data={},this.dependencies={loading:[],loaded:[]},this.mediapipeWarmups={isWarmingUp:!1,hands:!1,pose:!1,facemesh:!1},this.plugin={},this.taggedPlugins={untagged:[]},this.gesture={},this.taggedGestures={untagged:[]},this.config=this.cleanConfig(i),this.setupDebugger(),this.prepareModels(),this.loadCorePlugins(),this.loadCoreGestures(),this.hasAddedBodyClass=!1,this.isUpdating=!1,this.numModelsLoaded=0,this.on("modelReady",(function(){var e=0;Object.keys(t.model).forEach((function(i){t.model[i].enabled&&++e})),++t.numModelsLoaded===e&&(document.body.classList.remove("handsfree-loading"),document.body.classList.add("handsfree-started"),t.hasAddedBodyClass=!0,!t.config.isClient&&(!t.isUpdating||t.isUpdating&&t.config.autostart)&&(t.isLooping=!0,t.loop()))})),this.emit("init",this)}return Object(s.a)(e,[{key:"prepareModels",value:function(){this.model={weboji:{},hands:{},facemesh:{},pose:{},handpose:{}},this.model.weboji=new y(this,this.config.weboji),this.model.hands=new f(this,this.config.hands),this.model.pose=new m(this,this.config.pose),this.model.facemesh=new p(this,this.config.facemesh),this.model.handpose=new v(this,this.config.handpose)}},{key:"cleanConfig",value:function(e,t){return t||(t=Object.assign({},R)),t.setup.wrap.$parent=document.body,"boolean"==typeof e.weboji&&(e.weboji={enabled:e.weboji}),"boolean"==typeof e.hands&&(e.hands={enabled:e.hands}),"boolean"==typeof e.facemesh&&(e.facemesh={enabled:e.facemesh}),"boolean"==typeof e.pose&&(e.pose={enabled:e.pose}),"boolean"==typeof e.handpose&&(e.handpose={enabled:e.handpose}),e.plugin&&Object.keys(e.plugin).forEach((function(t){"boolean"==typeof e.plugin[t]&&(e.plugin[t]={enabled:e.plugin[t]})})),e.gesture&&Object.keys(e.gesture).forEach((function(t){"boolean"==typeof e.gesture[t]&&(e.gesture[t]={enabled:e.gesture[t]})})),k()({},t,e)}},{key:"update",value:function(e,t){var i=this;this.config=this.cleanConfig(e,this.config),this.isUpdating=!0,["hands","facemesh","pose","handpose","weboji"].forEach((function(t){var n=i.model[t].enabled;i.config[t]=i.model[t].config=k()({},i.model[t].config,e[t]),n&&!i.config[t].enabled?i.model[t].disable():!n&&i.config[t].enabled&&i.model[t].enable(!1)})),e.plugin&&Object.keys(e.plugin).forEach((function(t){"boolean"==typeof e.plugin[t].enabled&&(e.plugin[t].enabled?i.plugin[t].enable():i.plugin[t].disable())})),e.gesture&&Object.keys(e.gesture).forEach((function(t){"boolean"==typeof e.gesture[t].enabled&&(e.gesture[t].enabled?i.gesture[t].enable():i.gesture[t].disable())})),!this.config.isClient&&this.config.autostart?this.start(t):t&&t()}},{key:"start",value:function(e){var t=this;this.config=this.cleanConfig(this.config,this.config),this.isUpdating=!1,document.body.classList.add("handsfree-loading"),this.emit("loading",this),e&&this.on("modelReady",e,{once:!0}),this.numModelsLoaded=0,Object.keys(this.model).forEach((function(e){var i=t.model[e];i.enabled&&!i.dependenciesLoaded?i.loadDependencies():i.enabled&&(t.emit("modelReady",i),t.emit("".concat(e,"ModelReady"),i))})),Object.keys(this.config.plugin).forEach((function(e){var i,n;"boolean"==typeof(null===(i=t.config.plugin)||void 0===i||null===(n=i[e])||void 0===n?void 0:n.enabled)&&t.config.plugin[e].enabled&&t.plugin[e].enable()})),Object.keys(this.config.gesture).forEach((function(e){var i,n;"boolean"==typeof(null===(i=t.config.gesture)||void 0===i||null===(n=i[e])||void 0===n?void 0:n.enabled)&&t.config.gesture[e].enabled&&t.gesture[e].enable()}))}},{key:"stop",value:function(){location.reload()}},{key:"pause",value:function(){this.isLooping=!1}},{key:"unpause",value:function(){this.isLooping||(this.isLooping=!0,this.loop())}},{key:"loop",value:function(){var e,t=this;(Object.keys(this.model).forEach((function(e){var i=t.model[e];i.enabled&&i.dependenciesLoaded&&i.getData()})),this.emit("data",this.data),null===(e=this.taggedPlugins.untagged)||void 0===e||e.forEach((function(e){var i;t.plugin[e].enabled&&(null===(i=t.plugin[e])||void 0===i||i.onFrame(t.data))})),this.isDebugging)&&(["hands","pose","handpose","facemesh"].find((function(e){if(t.model[e].enabled)return e}))&&this.debug.context.video.drawImage(this.debug.$video,0,0,this.debug.$canvas.video.width,this.debug.$canvas.video.height));this.isLooping&&requestAnimationFrame((function(){return t.isLooping&&t.loop()}))}},{key:"use",value:function(e,t){var i=this;return"function"==typeof t&&(t={onFrame:t}),"string"==typeof(t=k()({},{name:e,models:[],tags:[],enabled:!0,config:{},onFrame:null,onUse:null,onEnable:null,onDisable:null},t)).models&&(t.models=[t.models]),"string"==typeof t.tags&&(t.tags=[t.tags]),t.tags.forEach((function(t){i.taggedPlugins[t]||(i.taggedPlugins[t]=[]),i.taggedPlugins[t].push(e)})),this.plugin[e]=new x(t,this),this.plugin[e].onUse&&this.plugin[e].onUse(),t.models.length?t.models.forEach((function(t){i.model[t].plugins.push(e)})):this.taggedPlugins.untagged.push(e),this.plugin[e]}},{key:"enablePlugins",value:function(e){var t=this;"string"==typeof e&&(e=[e]),e||(e=Object.keys(this.taggedPlugins)),e.forEach((function(e){t.taggedPlugins[e].forEach((function(e){t.plugin[e].enable()}))}))}},{key:"disablePlugins",value:function(e){var t=this;"string"==typeof e&&(e=[e]),e||(e=Object.keys(this.taggedPlugins)),e.forEach((function(e){t.taggedPlugins[e].forEach((function(e){t.plugin[e].disable()}))}))}},{key:"runPlugins",value:function(e){var t,i=this;this.data=e,this.config.isClient&&!this.hasAddedBodyClass&&(document.body.classList.add("handsfree-started"),this.hasAddedBodyClass=!0),Object.keys(this.model).forEach((function(t){i.model[t].data=null==e?void 0:e[t],i.model[t].runPlugins()})),null===(t=this.taggedPlugins.untagged)||void 0===t||t.forEach((function(e){var t;i.plugin[e].enabled&&(null===(t=i.plugin[e])||void 0===t||t.onFrame(i.data))}))}},{key:"useGesture",value:function(e){var t=this;switch("string"==typeof(e=k()({},{name:"untitled",description:[],models:[],tags:[],enabled:!0},e)).models&&(e.models=[e.models]),"string"==typeof e.tags&&(e.tags=[e.tags]),e.tags.forEach((function(i){t.taggedGestures[i]||(t.taggedGestures[i]=[]),t.taggedGestures[i].push(e.name)})),e.algorithm){case"fingerpose":this.gesture[e.name]=new L(e,this)}return e.models.length?e.models.forEach((function(i){t.model[i].gestures.push(e.name),t.model[i].updateGestureEstimator()})):this.taggedGestures.untagged.push(e.name),this.gesture[e.name]}},{key:"enableGestures",value:function(e){var t=this;"string"==typeof e&&(e=[e]),e||(e=Object.keys(this.taggedGestures)),e.forEach((function(e){t.taggedGestures[e].forEach((function(e){t.gesture[e].enable()}))}))}},{key:"disableGestures",value:function(e){var t=this;"string"==typeof e&&(e=[e]),e||(e=Object.keys(this.taggedGestures)),e.forEach((function(e){t.taggedGestures[e].forEach((function(e){t.gesture[e].disable()}))}))}},{key:"emit",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=new CustomEvent("handsfree-".concat(e),{detail:t});document.dispatchEvent(i)}},{key:"on",value:function(e,t,i){document.addEventListener("handsfree-".concat(e),(function(e){t(e.detail)}),i)}},{key:"normalize",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return(e-i)/(t-i)}},{key:"getUserMedia",value:function(e){var t,i,n=this;this.debug.stream||this.debug.isGettingStream?!this.debug.stream&&this.debug.isGettingStream?e&&this.on("gotUserMedia",e):(this.debug.$video.play(),this.emit("gotUserMedia",this.debug.stream),e&&e()):null!==(t=this.model.weboji)&&void 0!==t&&null!==(i=t.api)&&void 0!==i&&i.get_videoStream?(this.debug.$video=this.model.weboji.api.get_video(),this.debug.$video.srcObject=this.debug.stream=this.model.weboji.api.get_videoStream(),this.emit("gotUserMedia",this.debug.stream),e&&e()):(this.debug.isGettingStream=!0,navigator.mediaDevices.getUserMedia({audio:!1,video:{facingMode:"user",width:this.debug.$video.width,height:this.debug.$video.height}}).then((function(t){n.debug.$video.srcObject=n.debug.stream=t,n.debug.$video.onloadedmetadata=function(){n.debug.$video.play(),n.emit("gotUserMedia",t),e&&e()}})).catch((function(e){console.error("Error getting user media: ".concat(e))})).finally((function(){n.debug.isGettingStream=!1})))}},{key:"loadCorePlugins",value:function(){var e=this;Object.keys(W).forEach((function(t){e.use(t,W[t])}))}},{key:"loadCoreGestures",value:function(){var e=this;Object.keys(I).forEach((function(t){e.useGesture(I[t])}))}},{key:"setupDebugger",value:function(){var e=this;if(this.debug={},!this.config.setup.wrap.$el){var t=document.createElement("DIV");t.classList.add("handsfree-debugger"),this.config.setup.wrap.$el=t}if(this.debug.$wrap=this.config.setup.wrap.$el,!this.config.setup.video.$el){var i=document.createElement("VIDEO");i.setAttribute("playsinline",!0),i.classList.add("handsfree-video"),i.setAttribute("id","handsfree-video-".concat(this.id)),this.config.setup.video.$el=i}this.debug.$video=this.config.setup.video.$el,this.debug.$video.width=this.config.setup.video.width,this.debug.$video.height=this.config.setup.video.height,this.debug.$wrap.appendChild(this.debug.$video),this.debug.$canvas={},this.debug.context={},this.config.setup.canvas.video={width:this.debug.$video.width,height:this.debug.$video.height},["video","weboji","facemesh","pose","hands","handpose"].forEach((function(t){e.debug.$canvas[t]={},e.debug.context[t]={};var i=e.config.setup.canvas[t].$el;i||(i=document.createElement("CANVAS"),e.config.setup.canvas[t].$el=i),i.classList.add("handsfree-canvas","handsfree-canvas-".concat(t),"handsfree-hide-when-started-without-".concat(t)),i.setAttribute("id","handsfree-canvas-".concat(t,"-").concat(e.id)),e.debug.$canvas[t]=e.config.setup.canvas[t].$el,e.debug.$canvas[t].width=e.config.setup.canvas[t].width,e.debug.$canvas[t].height=e.config.setup.canvas[t].height,e.debug.$wrap.appendChild(e.debug.$canvas[t]),["weboji","handpose"].includes(t)?e.debug.$canvas[t].classList.add("handsfree-canvas-webgl"):e.debug.context[t]=e.debug.$canvas[t].getContext("2d")})),this.config.setup.wrap.$parent.appendChild(this.debug.$wrap),this.config.showDebug?this.showDebugger():this.hideDebugger()}},{key:"showDebugger",value:function(){this.isDebugging=!0,document.body.classList.add("handsfree-show-debug"),document.body.classList.remove("handsfree-hide-debug")}},{key:"hideDebugger",value:function(){this.isDebugging=!1,document.body.classList.remove("handsfree-show-debug"),document.body.classList.add("handsfree-hide-debug")}}]),e}();t.default=N}}]);